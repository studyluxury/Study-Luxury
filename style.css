:root{
  --bg1:#f7f7ff;
  --bg2:#fff8fb;
  --ink:#1d1e2a;
  --muted:#6a6f86;

  --card: rgba(255,255,255,.68);
  --stroke: rgba(35,40,70,.10);
  --shadow: 0 18px 50px rgba(20,20,50,.10);

  --p1:#b6d5ff; /* pastel blue */
  --p2:#ffd6e7; /* pastel pink */
  --p3:#d8ffe8; /* pastel mint */
  --p4:#fff2b6; /* pastel yellow */
  --p5:#e6d7ff; /* pastel violet */

  --primary:#5b7cfa;
  --danger:#ef476f;
  --radius:22px;
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, "Hiragino Sans", "Noto Sans JP", "Segoe UI", Arial;
  color:var(--ink);
  background:
    radial-gradient(900px 500px at 15% 10%, rgba(182,213,255,.65), transparent 60%),
    radial-gradient(900px 520px at 85% 15%, rgba(255,214,231,.65), transparent 60%),
    radial-gradient(900px 520px at 25% 85%, rgba(216,255,232,.55), transparent 60%),
    linear-gradient(180deg, var(--bg1), var(--bg2));
}

.topbar{
  position:sticky; top:0;
  z-index:10;
  backdrop-filter: blur(14px);
  background: rgba(255,255,255,.55);
  border-bottom: 1px solid var(--stroke);
}

.brand{
  display:flex; gap:12px; align-items:center;
  padding:14px 16px 8px;
}
.logo{
  width:44px; height:44px;
  border-radius:14px;
  display:grid; place-items:center;
  background: linear-gradient(135deg, var(--p1), var(--p2));
  border:1px solid rgba(0,0,0,.06);
  font-weight:800;
}
.title{ font-size:18px; font-weight:800; letter-spacing:.2px; }
.subtitle{ font-size:12px; color:var(--muted); margin-top:2px; }

.tabs{
  display:flex; gap:8px;
  padding: 0 16px 12px;
  flex-wrap:wrap;
}
.tab{
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.65);
  padding:10px 12px;
  border-radius:14px;
  cursor:pointer;
  font-weight:700;
}
.tab.isActive{
  background: linear-gradient(135deg, rgba(182,213,255,.9), rgba(255,214,231,.9));
  border-color: rgba(90,120,250,.25);
}

.wallet{
  display:flex;
  align-items:flex-end;
  gap:10px;
  padding: 0 16px 14px;
}
.walletLabel{ font-size:12px; color:var(--muted); }
.walletValue{
  font-size:26px; font-weight:900;
  line-height:1;
}
.walletHint{ font-size:11px; color:var(--muted); margin-left:auto; }

.wrap{
  max-width:1100px;
  margin: 0 auto;
  padding: 14px 14px 80px;
}

.page{ display:none; }
.page.isShow{ display:block; }

.grid2{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:14px;
}
@media (max-width: 980px){
  .grid2{ grid-template-columns: 1fr; }
}

.card{
  background: var(--card);
  border:1px solid var(--stroke);
  box-shadow: var(--shadow);
  border-radius: var(--radius);
  padding: 14px;
}

.cardHead{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-bottom:12px;
}
h2{ font-size:16px; margin:0; }
.pill{
  font-size:12px;
  color:#2c2f44;
  background: rgba(255,255,255,.75);
  border:1px solid var(--stroke);
  padding:6px 10px;
  border-radius:999px;
}

.form{
  display:grid;
  gap:12px;
}
.field{
  display:grid; gap:6px;
}
.fieldWide{ grid-column: 1 / -1; }
.label{ font-size:12px; color:var(--muted); font-weight:700; }
.small{ font-size:12px; }
.dim{ opacity:.75; }

input, select{
  width:100%;
  padding:12px 12px;
  border-radius:14px;
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.72);
  outline:none;
  font-size:14px;
}
input:focus, select:focus{ border-color: rgba(91,124,250,.45); }

.row{
  display:flex; gap:10px; align-items:center; flex-wrap:wrap;
}
.spacer{ flex:1; }

.btn{
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.75);
  padding:12px 14px;
  border-radius:14px;
  cursor:pointer;
  font-weight:800;
}
.btn.tiny{ padding:8px 10px; border-radius:12px; }
.btn.primary{
  color:white;
  border-color: rgba(0,0,0,.02);
  background: linear-gradient(135deg, var(--primary), #7aa7ff);
}
.btn.danger{
  color:white;
  border-color: rgba(0,0,0,.02);
  background: linear-gradient(135deg, var(--danger), #ff7aa2);
}
.btn.ghost{
  background: linear-gradient(135deg, rgba(216,255,232,.70), rgba(255,242,182,.70));
}
.btn.sparkle{
  color:#1d1e2a;
  border-color: rgba(0,0,0,.02);
  background: linear-gradient(135deg, rgba(255,214,231,.95), rgba(182,213,255,.95));
  position:relative;
  overflow:hidden;
}
.btn.sparkle:after{
  content:"";
  position:absolute; inset:-40%;
  background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.75), transparent 55%);
  transform: rotate(12deg);
  animation: shimmer 2.4s infinite;
}
@keyframes shimmer{
  0%{ transform: translateX(-30%) rotate(12deg); opacity:.0; }
  35%{ opacity:.9; }
  65%{ opacity:.9; }
  100%{ transform: translateX(30%) rotate(12deg); opacity:0; }
}

.stampBox{
  padding:12px;
  border-radius:18px;
  border:1px solid var(--stroke);
  background: linear-gradient(135deg, rgba(182,213,255,.35), rgba(255,214,231,.35));
}
.stampHead{
  display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;
}
.stampPick{ display:flex; gap:8px; min-width:240px; }

.calTop{
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  margin-bottom:10px;
}
.calTitle{ font-weight:900; }
.calendar{
  display:grid;
  grid-template-columns: repeat(7, 1fr);
  gap:8px;
}
.day{
  min-height:54px;
  padding:10px;
  border-radius:16px;
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.62);
  position:relative;
}
.day.isOther{ opacity:.45; }
.dayNum{ font-size:12px; color:var(--muted); font-weight:800; }
.stamp{
  position:absolute;
  right:10px; bottom:10px;
  width:26px; height:26px;
  display:grid; place-items:center;
  font-weight:900;
  color:#1d1e2a;
  border:1px solid rgba(0,0,0,.08);
  box-shadow: 0 10px 20px rgba(0,0,0,.08);
}
.stamp.round{ border-radius:999px; }
.stamp.squircle{ border-radius:12px; }
.stamp.diamond{ transform: rotate(45deg); border-radius:10px; }
.stamp.diamond > span{ transform: rotate(-45deg); display:block; }
.stamp.star{
  clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
  border-radius:0;
}
.calLegend{
  display:flex; flex-wrap:wrap; gap:8px;
  margin: 8px 0 12px;
}
.legendItem{
  display:flex; align-items:center; gap:8px;
  font-size:12px;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.65);
}

.log{
  display:grid; gap:8px;
}
.logItem{
  display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;
  padding:12px;
  border-radius:18px;
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.62);
}
.logMain{ display:grid; gap:4px; }
.logTop{ font-weight:900; }
.logSub{ font-size:12px; color:var(--muted); }
.logRight{ font-weight:900; }

.seg{
  display:flex; gap:8px;
  background: rgba(255,255,255,.55);
  border:1px solid var(--stroke);
  border-radius:14px;
  padding:4px;
}
.segBtn{
  border:none;
  background: transparent;
  padding:8px 10px;
  border-radius:12px;
  cursor:pointer;
  font-weight:900;
  color: var(--muted);
}
.segBtn.isOn{
  color: var(--ink);
  background: linear-gradient(135deg, rgba(216,255,232,.75), rgba(255,242,182,.75));
}

.stats{
  display:grid;
  grid-template-columns: repeat(4, 1fr);
  gap:10px;
  margin: 12px 0;
}
@media (max-width: 900px){ .stats{ grid-template-columns: repeat(2, 1fr);} }
.stat{
  padding:12px;
  border-radius:18px;
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.62);
}
.statName{ font-size:12px; color:var(--muted); font-weight:800; }
.statVal{ font-size:20px; font-weight:950; margin-top:4px; }

.charts{
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap:12px;
}
@media (max-width: 980px){ .charts{ grid-template-columns: 1fr; } }
.chartCard{
  padding:12px;
  border-radius:18px;
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.62);
}
.chartTitle{ font-weight:900; margin-bottom:8px; }

.rewardList{
  display:grid; gap:8px;
}
.rewardItem{
  display:flex; justify-content:space-between; align-items:center; gap:10px;
  padding:12px;
  border-radius:18px;
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.62);
}
.rewardMeta{
  font-size:12px; color:var(--muted);
}
.iconBtn{
  border:1px solid var(--stroke);
  background: rgba(255,255,255,.8);
  border-radius:12px;
  padding:8px 10px;
  cursor:pointer;
  font-weight:900;
}

.modal{
  position:fixed; inset:0;
  display:none;
  place-items:center;
  background: rgba(10,10,20,.22);
  backdrop-filter: blur(8px);
  z-index:50;
}
.modal.isShow{ display:grid; }
.modalCard{
  width:min(520px, calc(100% - 24px));
  border-radius: 22px;
  background: rgba(255,255,255,.90);
  border:1px solid rgba(0,0,0,.08);
  box-shadow: 0 30px 80px rgba(10,10,25,.20);
  overflow:hidden;
}
.modalHead{
  display:flex; justify-content:space-between; align-items:center;
  padding:14px;
  background: linear-gradient(135deg, rgba(182,213,255,.75), rgba(255,214,231,.75));
}
.modalTitle{ font-weight:950; }
.modalBody{ padding:18px; }
.result{
  font-size:22px;
  font-weight:950;
  padding:16px;
  border-radius:18px;
  background: linear-gradient(135deg, rgba(216,255,232,.75), rgba(255,242,182,.75));
  border:1px solid rgba(0,0,0,.06);
}

.confetti{
  position:fixed; inset:0;
  pointer-events:none;
  z-index:60;
}
.confetti i{
  position:absolute;
  width:10px; height:10px;
  border-radius:4px;
  opacity:.95;
  animation: fall 1.2s linear forwards;
}
@keyframes fall{
  from{ transform: translateY(-20px) rotate(0deg); }
  to{ transform: translateY(110vh) rotate(420deg); }
}
